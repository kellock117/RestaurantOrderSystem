<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<style>
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
    }
    
    .topnav {
      overflow: hidden;
      background-color: #333;
    }
    
    .topnav a {
      float: left;
      color: #f2f2f2;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      font-size: 17px;
    }
    
    .topnav a:hover {
      background-color: #ddd;
      color: black;
    }
    
    .topnav a.active {
      background-color: #04AA6D;
      color: white;
    }
    </style>
<body>
    <h1>Admin Main</h1>
        <div class="topnav">
            <a id = "createuser" class="active">Create User</a>
            <a id = "viewuser">View Users</a>
            <a id = "searchuser">Search Users</a>
            <a id = "updateuser">Update Users</a>
            <a id = "deleteuser">Delete Users</a>
            <a id = "logout">Logout</a>
          </div>
          <div>
            <form id = "pg1">
                <label>Id: <input type="text" id="idNo" required placeholder="Enter ID"/> </label> <br/>
                <label>Username: <input type="text" id="username" required placeholder="Enter Username"/> </label> <br/>
                <label>Password: <input type="text" id="password"required placeholder="Enter Password"/></label> <br/>
                <label for="role">Select Role</label><br />
                <input type="radio" id="role" name="role" value="admin">
                <label for="admin">admin</label><br>
                <input type="radio" id="role" name="role" value="manager">
                <label for="manager">manager</label><br>
                <input type="radio" id="role" name="role" value="customer">
                <label for="customer">customer</label><br>
                <input type="radio" id="role" name="role" value="staff">
                <label for="staff">staff</label><br>
                <input type="radio" id="role" name="role" value="owner">
                <label for="owner">owner</label><br>
                <button onclick="CreateUser()" type="submit" value="Create User">Create User</button>
            </form>
            <jj id = "pg2" style="display: none;">
                <div id = "userlist">
                    User List Here
                </div>
            </jj>
            <form id = "pg5" style="display: none;">
                <label>Id: <input type="text" id="Delete" required placeholder="Enter ID"/> </label> <br/>
                <button onclick="DeleteUser()" type="submit" value="Create User">Delete User</button>
            </form>
          </div>


    <script>
        
        document.getElementById("createuser").addEventListener("click", function() {
            document.getElementById("createuser").className = "active ";
            document.getElementById("viewuser").className = "";
            document.getElementById("logout").className =" ";
            document.getElementById("searchuser").className = " ";
            document.getElementById("updateuser").className = " ";
            document.getElementById("deleteuser").className = " ";
            var x = document.getElementById("pg1");
            var z = document.getElementById("pg2");
            var a = document.getElementById("pg5");
            x.style.display = "block";
            z.style.display = "none";
            a.style.display = "none";
        } );

        document.getElementById("viewuser").addEventListener("click", function(){
            document.getElementById("createuser").className = " ";
            document.getElementById("viewuser").className = "active";
            document.getElementById("logout").className =" ";
            document.getElementById("searchuser").className = " ";
            document.getElementById("updateuser").className = " ";
            document.getElementById("deleteuser").className = " ";
            var x = document.getElementById("pg1");
            var z = document.getElementById("pg2");
            var a = document.getElementById("pg5");
            x.style.display = "none";
            z.style.display = "block";
            a.style.display = "none";
            fetch("htt[://localhost:5000/admin/view", {
                method: "get"
            }).then((response) => response.json())
            .then((data) => {
                for (row = 0; row < data.length; row++){
                    const num = row+1;
                    document.getElementById("userlist").innerHTML = "Account " + num + ": " + data[row];
                }
            })

        } );

        document.getElementById("searchuser").addEventListener("click", function() {
            document.getElementById("createuser").className = " ";
            document.getElementById("viewuser").className = "";
            document.getElementById("logout").className =" ";
            document.getElementById("searchuser").className = "active";
            document.getElementById("updateuser").className = " ";
            document.getElementById("deleteuser").className = " ";
            var x = document.getElementById("pg1");
            var z = document.getElementById("pg2");
            var a = document.getElementById("pg5");
            x.style.display = "none";
            z.style.display = "none";
            a.style.display = "none";
        } );

        document.getElementById("updateuser").addEventListener("click", function() {
            document.getElementById("createuser").className = " ";
            document.getElementById("viewuser").className = "";
            document.getElementById("logout").className =" ";
            document.getElementById("searchuser").className = " ";
            document.getElementById("updateuser").className = "active";
            document.getElementById("deleteuser").className = " ";
            var x = document.getElementById("pg1");
            var z = document.getElementById("pg2");
            var a = document.getElementById("pg5");
            x.style.display = "none";
            z.style.display = "none";
            a.style.display = "none";
        } );

        document.getElementById("deleteuser").addEventListener("click", function() {
            document.getElementById("createuser").className = " ";
            document.getElementById("viewuser").className = "";
            document.getElementById("logout").className =" ";
            document.getElementById("searchuser").className = " ";
            document.getElementById("updateuser").className = " ";
            document.getElementById("deleteuser").className = "active";
            var x = document.getElementById("pg1");
            var z = document.getElementById("pg2");
            var a = document.getElementById("pg5");
            x.style.display = "none";
            z.style.display = "none";
            a.style.display = "block";
        } );

        document.getElementById("logout").addEventListener("click", function() {
            document.getElementById("createuser").className = " ";
            document.getElementById("viewuser").className = " ";
            document.getElementById("logout").className ="active";
            document.getElementById("searchuser").className = " ";
            document.getElementById("updateuser").className = " ";
            document.getElementById("deleteuser").className = " ";
            var x = document.getElementById("pg1");
            var z = document.getElementById("pg2");
            var a = document.getElementById("pg5");
            x.style.display = "none";
            z.style.display = "none";
            a.style.display = "none";
            fetch("htt[://localhost:5000/admin/logout", {
                method: "get"
            })
            location.replace("http://localhost:5000/")
        } );

        function CreateUser() {
            fetch("http://localhost:5000/admin/create", {
                method: "POST",
                body: JSON.stringify({
                    id: document.getElementById("idNo").value,
                    password: document.getElementById("password").value,
                    userName: document.getElementById("username").value,
                    role: document.getElementById("role").value
                })
            }).then((response) => response.json())
            .then((data) => {
                if (data.status === 'success'){
                    window.alert("Account Created Successfully")
                }
                if (data.status === 'user name already exists'){
                    window.alert("Username already exists please try again")
                }
                if (data.status === 'ID already exists'){
                    window.alert("ID number already exists please try again")
                }

            })
        }

        function DeleteUser() {
            fetch("http://localhost:5000/admin/delete", {
                method: "DELETE",
                body: JSON.stringify({
                    id: document.getElementById("Delete").value
                })
            }).then((response) => response.json())
            .then((data) => {
                if (data.status === 'success'){
                    window.alert("Account deleted successfully")
                } else 
                    window.alert("Error occured pleaese try again")
            }) 
        }
    </script>
</body>
</html>

<!-- 
    1. need to decorate navigation bar with option -Create User, User List(this is for view, search, update, delete),
        logout(upper right side), and user name left of logout
        you can get user info by sending REST API get request to localhost:5000/userinfo then json file would be returned
        
        {
            "loggedIn": false,
            "id": null,
            "userName": null,
            "role": null
        }

    2. if you click each nav bar then hided page will be shown. if you click other then hide current one, and
        make structure for each option, for example, create session needs id, password, user name blank and option which can select role.
        For user list session, I'll use filter for search function, ask me if you are doing this, I'll send you sample image.

    3. If you want want to know what REST api request you need to send, refer "api/main.route.js " file and check route("admin/api")
        if you want to know what each middleware return then check "api/admin.controller.js"
 -->
